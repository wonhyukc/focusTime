<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¬ëª¨ë¡œê·¸ (PomoLog)</title>
    <link rel="stylesheet" href="../styles/dashboard.css">
    <script src="../scripts/Chart.min.js"></script>
    <link rel="stylesheet" href="../styles/heatmap.css">
    <script src="../scripts/email.min.js"></script>
    <script>
    function getLang() {
        const lang = (navigator.language || navigator.userLanguage || 'ko').slice(0,2).toLowerCase();
        return [
            'ko','en','zh','hi','es','fr','ar','bn','pt','ru','ur'
        ].includes(lang) ? lang : 'ko';
    }
    function getI18nUrl(lang) {
        if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.getURL) {
            return chrome.runtime.getURL(`i18n/${lang}.json`);
        }
        return '../i18n/' + lang + '.json';
    }
    async function loadI18n(lang) {
        try {
            const res = await fetch(getI18nUrl(lang));
            if (!res.ok) throw new Error('not ok');
            return await res.json();
        } catch {
            const res = await fetch(getI18nUrl('ko'));
            return await res.json();
        }
    }
    async function i18nUpdate(selectedLang) {
        const lang = selectedLang || getLang();
        const dict = await loadI18n(lang);
        document.title = dict.appName + ' (PomoLog)';
        // í—¤ë”
        const h1 = document.querySelector('.logo h1');
        if (h1) h1.innerHTML = dict.appName + ' (PomoLog)';
        const logo = document.querySelector('.logo img');
        if (logo) logo.alt = dict.appName + ' ë¡œê³ ';
        // í”„ë¡œì íŠ¸ ì´ë¦„ ë¼ë²¨
        const projectLabel = document.querySelector('label[for="project-name"]');
        if (projectLabel) projectLabel.textContent = dict.currentProject;
        // í”¼ë“œë°± íƒ­
        const feedbackTab = document.querySelector('#feedback h2');
        if (feedbackTab) feedbackTab.textContent = dict.feedback;
        const feedbackGuide = document.querySelector('#feedback .feedback-container > div');
        if (feedbackGuide) feedbackGuide.innerHTML = dict.feedbackGuide;
        const feedbackGuideShort = document.querySelector('#feedback .feedback-container > p');
        if (feedbackGuideShort) feedbackGuideShort.textContent = dict.feedbackGuideShort;
        // ì‚¬ìš´ë“œ í¬ë ˆë”§
        const credits = document.querySelector('#feedback .credits-section h3');
        if (credits) credits.textContent = dict.credits;
        // ë“œë¡­ë‹¤ìš´ ê°’ ë™ê¸°í™”
        const langSelect = document.getElementById('lang-select');
        if (langSelect) langSelect.value = lang;
    }
    document.addEventListener('DOMContentLoaded', function() {
        i18nUpdate();
        const langSelect = document.getElementById('lang-select');
        if (langSelect) {
            langSelect.value = getLang();
            langSelect.addEventListener('change', function() {
                i18nUpdate(langSelect.value);
            });
        }
    });
    </script>
</head>
<body>
    <header>
        <div class="logo">
            <img src="../icons/pomolog_icon_48x48.png" alt="í¬ëª¨ë¡œê·¸ ë¡œê³ ">
            <h1>í¬ëª¨ë¡œê·¸ (PomoLog)</h1>
        </div>
        <nav>
            <button class="tab-button active" data-tab="settings">ì„¤ì •</button>
            <button class="tab-button" data-tab="stats">ê¸°ë¡</button>
            <button class="tab-button" data-tab="feedback">í”¼ë“œë°±</button>
            <select id="lang-select" style="margin-left:1em;">
                <option value="ko">í•œêµ­ì–´</option>
                <option value="en">English</option>
                <option value="zh">ä¸­æ–‡</option>
                <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                <option value="es">EspaÃ±ol</option>
                <option value="fr">FranÃ§ais</option>
                <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾</option>
                <option value="pt">PortuguÃªs</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="ur">Ø§Ø±Ø¯Ùˆ</option>
            </select>
        </nav>
    </header>

    <main>
        <!-- ì„¤ì • íƒ­ -->
        <section id="settings" class="tab-content active">
            <div class="project-settings">
                <h2>í”„ë¡œì íŠ¸</h2>
                <div class="setting-group">
                    <label for="project-name">í˜„ì¬ í”„ë¡œì íŠ¸ ì´ë¦„:</label>
                    <input type="text" id="project-name" placeholder="í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" list="project-history-list">
                    <datalist id="project-history-list">
                        <!-- ì´ì „ í”„ë¡œì íŠ¸ ì´ë¦„ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </datalist>
                </div>
            </div>

            <div class="settings-container">
                <div class="timer-settings">
                    <h2>ì§‘ì¤‘</h2>
                    <div class="setting-group">
                        <label for="focus-duration">ì§€ì† ì‹œê°„:</label>
                        <input type="number" id="focus-duration" min="1" max="60" value="25"> ë¶„
                    </div>
                    <div class="setting-group">
                        <label>íƒ€ì´ë¨¸ ì†Œë¦¬:</label>
                        <select id="focus-sound">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                        <button class="preview-sound">â–¶ ë¯¸ë¦¬ë“£ê¸°</button>
                        <input type="number" id="focus-sound-volume" min="0" max="100" value="10">
                        <label for="focus-sound-volume">ë³¼ë¥¨ (0~100):</label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="focus-desktop-notification">
                            ë°ìŠ¤í¬í†± ì•Œë¦¼ ì„¤ì •
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="focus-tab-notification">
                            ìƒˆë¡œìš´ íƒ­ ì•Œë¦¼ ì„¤ì •
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>ì¬ìƒ:</label>
                        <select id="focus-sound-type">
                            <option value="brown_noise">Brown Noise</option>
                            <option value="rainy_birds">Rainy Day</option>
                            <option value="clock_ticking">Clock Ticking</option>
                        </select>
                        <button class="preview-sound">â–¶ ë¯¸ë¦¬ë“£ê¸°</button>
                        <input type="number" id="focus-sound-type-volume" min="0" max="100" value="10">
                        <label for="focus-sound-type-volume">ë³¼ë¥¨ (0~100):</label>
                    </div>
                </div>

                <div class="timer-settings">
                    <h2>ì§§ì€ íœ´ì‹</h2>
                    <div class="setting-group">
                        <label for="short-break-duration">ì§€ì† ì‹œê°„:</label>
                        <input type="number" id="short-break-duration" min="1" max="30" value="5"> ë¶„
                    </div>
                    <div class="setting-group">
                        <label>íƒ€ì´ë¨¸ ì†Œë¦¬:</label>
                        <select id="short-break-sound">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                        <button class="preview-sound">â–¶ ë¯¸ë¦¬ë“£ê¸°</button>
                        <input type="number" id="short-break-sound-volume" min="0" max="100" value="10">
                        <label for="short-break-sound-volume">ë³¼ë¥¨ (0~100):</label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="short-break-desktop-notification">
                            ë°ìŠ¤í¬í†± ì•Œë¦¼ ì„¤ì •
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="short-break-tab-notification">
                            ìƒˆë¡œìš´ íƒ­ ì•Œë¦¼ ì„¤ì •
                        </label>
                    </div>
                </div>

                <div class="timer-settings">
                    <h2>ê¸´ íœ´ì‹</h2>
                    <div class="setting-group">
                        <label>ê¸´ íœ´ì‹ ì‹œì‘í•˜ê¸°:</label>
                        <select id="long-break-start">
                            <option value="2">2ë²ˆì§¸ íœ´ì‹ë§ˆë‹¤</option>
                            <option value="3">3ë²ˆì§¸ íœ´ì‹ë§ˆë‹¤</option>
                            <option value="4">4ë²ˆì§¸ íœ´ì‹ë§ˆë‹¤</option>
                            <option value="5">5ë²ˆì§¸ íœ´ì‹ë§ˆë‹¤</option>
                            <option value="6">6ë²ˆì§¸ íœ´ì‹ë§ˆë‹¤</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="long-break-duration">ì§€ì† ì‹œê°„:</label>
                        <input type="number" id="long-break-duration" min="1" max="60" value="15"> ë¶„
                    </div>
                    <div class="setting-group">
                        <label>íƒ€ì´ë¨¸ ì†Œë¦¬:</label>
                        <select id="long-break-sound">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                        <button class="preview-sound">â–¶ ë¯¸ë¦¬ë“£ê¸°</button>
                        <input type="number" id="long-break-sound-volume" min="0" max="100" value="10">
                        <label for="long-break-sound-volume">ë³¼ë¥¨ (0~100):</label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="long-break-desktop-notification">
                            ë°ìŠ¤í¬í†± ì•Œë¦¼ ì„¤ì •
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="long-break-tab-notification">
                            ìƒˆë¡œìš´ íƒ­ ì•Œë¦¼ ì„¤ì •
                        </label>
                    </div>
                </div>
            </div>
            <div class="settings-bottom-menu">
                <div class="bottom-menu-buttons">
                    <button id="export-settings" class="menu-button">
                        <span class="icon">â¬‡ï¸</span>
                        ì„¤ì • ë‚´ë³´ë‚´ê¸°
                    </button>
                    <button id="import-settings" class="menu-button">
                        <span class="icon">â¬†ï¸</span>
                        ì„¤ì • ê°€ì ¸ì˜¤ê¸°
                    </button>
                    <button id="reset-settings" class="menu-button warning">
                        <span class="icon">ğŸ”„</span>
                        ì„¤ì • ì´ˆê¸°í™”
                    </button>
                </div>
                <input type="file" id="settings-file-input" accept=".json" style="display: none;">
            </div>
        </section>

        <!-- í†µê³„ íƒ­ -->
        <section id="stats" class="tab-content">
            <div class="stats-container">
                <div class="stats-summary">
                    <div class="stat-card">
                        <h3>ì˜¤ëŠ˜</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>ì´ë²ˆ ì£¼</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>ì´ë²ˆ ë‹¬</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>ì˜¬í•´</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>ì´</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                </div>

                <div class="stats-charts">
                    <div class="chart-container">
                        <h3>ì¼ ë‹¨ìœ„ ì°¨íŠ¸</h3>
                        <canvas id="daily-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>ì£¼ ë‹¨ìœ„ ì°¨íŠ¸</h3>
                        <canvas id="weekly-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>ì›” ë‹¨ìœ„ ì°¨íŠ¸</h3>
                        <canvas id="monthly-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>ë…„ ë‹¨ìœ„ ì°¨íŠ¸</h3>
                        <canvas id="yearly-chart" height="200"></canvas>
                    </div>
                </div>

                <div class="stats-bottom-menu">
                    <div class="bottom-menu-buttons">
                        <button id="export-stats" class="menu-button">
                            <span class="icon">â¬‡ï¸</span>
                            í†µê³„ ë‚´ë³´ë‚´ê¸°
                        </button>
                        <button id="import-stats" class="menu-button">
                            <span class="icon">â¬†ï¸</span>
                            í†µê³„ ê°€ì ¸ì˜¤ê¸°
                        </button>
                        <button id="reset-stats" class="menu-button warning">
                            <span class="icon">ğŸ”„</span>
                            í†µê³„ ì´ˆê¸°í™”
                        </button>
                    </div>
                    <input type="file" id="stats-file-input" accept=".csv" style="display: none;">
                </div>
            </div>
        </section>

        <!-- í”¼ë“œë°± íƒ­ -->
        <section id="feedback" class="tab-content">
            <div class="feedback-container">
                <h2>í”¼ë“œë°±</h2>
                <p>ì—¬ëŸ¬ë¶„ì˜ ì†Œì¤‘í•œ ì˜ê²¬ì„ ë“¤ë ¤ì£¼ì„¸ìš”!</p>
                <div style="margin-bottom: 1em; color: #444; font-size: 1.1em;">
                    í–¥í›„ ê°œì„ í•˜ê² ìŠµë‹ˆë‹¤. í”¼ë“œë°±ì€ <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b> ìœ¼ë¡œ ë©”ì¼ ë³´ë‚´ì£¼ì„¸ìš”.
                </div>
                <!--
                <form id="feedback-form">
                    <textarea id="feedback-text" rows="5" placeholder="ì˜ê²¬ì„ ì‘ì„±í•´ì£¼ì„¸ìš”..."></textarea>
                    <button type="submit" class="submit-feedback">ë³´ë‚´ê¸°</button>
                </form>
                -->
                <div class="credits-section">
                    <h3>ì‚¬ìš´ë“œ í¬ë ˆë”§</h3>
                    <ul>
                        <li>Gong 002.wav by tec_studio -- <a href="https://freesound.org/s/361494/" target="_blank">https://freesound.org/s/361494/</a> -- License: Creative Commons 0</li>
                        <li>Brown Noise 2 minutes by Jagadamba -- <a href="https://freesound.org/s/253922/" target="_blank">https://freesound.org/s/253922/</a> -- License: Attribution NonCommercial 4.0</li>
                        <li>Rainy Day with Various Birds by toonothing -- <a href="https://freesound.org/s/201534/" target="_blank">https://freesound.org/s/201534/</a> -- License: Creative Commons 0</li>
                        <li>ticking of the clock 01.wav by blukotek -- <a href="https://freesound.org/s/412751/" target="_blank">https://freesound.org/s/412751/</a> -- License: Creative Commons 0</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- Chrome API Mock for standalone usage -->
    <script src="../scripts/chrome-api-mock.js"></script>
    <!-- Then load our application scripts -->
    <script src="../scripts/dashboard.js"></script>
    <script src="../scripts/settings.js"></script>
    <script src="../scripts/stats-display.js"></script>
</body>
</html> 