<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포모로그 (PomoLog)</title>
    <link rel="stylesheet" href="../styles/dashboard.css">
    <script src="../scripts/Chart.min.js"></script>
    <link rel="stylesheet" href="../styles/heatmap.css">
    <script src="../scripts/email.min.js"></script>
    <script>
    // i18n dictionary (must match settings.js)
    const I18N = {
        ko: {
            appName: '포모로그',
            feedbackGuide: '향후 개선하겠습니다. 피드백은 <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b> 으로 메일 보내주세요.',
            currentProject: '현재 프로젝트 이름:',
            feedback: '피드백',
            feedbackGuideShort: '여러분의 소중한 의견을 들려주세요!',
            credits: '사운드 크레딧'
        },
        en: {
            appName: 'PomoLog',
            feedbackGuide: 'We will improve this in the future. Please send feedback to <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b>.',
            currentProject: 'Current Project Name:',
            feedback: 'Feedback',
            feedbackGuideShort: 'We value your feedback!',
            credits: 'Sound Credits'
        },
        zh: {
            appName: '番茄日志',
            feedbackGuide: '我们将来会改进。请将反馈发送到 <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b>。',
            currentProject: '当前项目名称：',
            feedback: '反馈',
            feedbackGuideShort: '欢迎您的宝贵意见！',
            credits: '音效致谢'
        },
        hi: {
            appName: 'पोमोलॉग',
            feedbackGuide: 'हम भविष्य में इसमें सुधार करेंगे। कृपया अपनी प्रतिक्रिया <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b> पर भेजें।',
            currentProject: 'वर्तमान परियोजना नाम:',
            feedback: 'प्रतिक्रिया',
            feedbackGuideShort: 'आपकी प्रतिक्रिया हमारे लिए महत्वपूर्ण है!',
            credits: 'साउंड क्रेडिट्स'
        },
        es: {
            appName: 'PomoLog',
            feedbackGuide: 'Mejoraremos esto en el futuro. Por favor, envíe sus comentarios a <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b>.',
            currentProject: 'Nombre del proyecto actual:',
            feedback: 'Comentarios',
            feedbackGuideShort: '¡Valoramos sus comentarios!',
            credits: 'Créditos de sonido'
        },
        fr: {
            appName: 'PomoLog',
            feedbackGuide: 'Nous améliorerons cela à l\'avenir. Veuillez envoyer vos commentaires à <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b>.',
            currentProject: 'Nom du projet actuel :',
            feedback: 'Retour',
            feedbackGuideShort: 'Nous apprécions vos commentaires !',
            credits: 'Crédits sonores'
        },
        ar: {
            appName: 'بومولوج',
            feedbackGuide: 'سنعمل على تحسين ذلك في المستقبل. يرجى إرسال ملاحظاتك إلى <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b>.',
            currentProject: 'اسم المشروع الحالي:',
            feedback: 'ملاحظات',
            feedbackGuideShort: 'نحن نقدر ملاحظاتك!',
            credits: 'اعتمادات الصوت'
        },
        bn: {
            appName: 'পোমোলগ',
            feedbackGuide: 'আমরা ভবিষ্যতে এটি উন্নত করব। দয়া করে আপনার মতামত <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b> এ পাঠান।',
            currentProject: 'বর্তমান প্রকল্পের নাম:',
            feedback: 'প্রতিক্রিয়া',
            feedbackGuideShort: 'আপনার মতামত আমাদের জন্য গুরুত্বপূর্ণ!',
            credits: 'সাউন্ড ক্রেডিট'
        },
        pt: {
            appName: 'PomoLog',
            feedbackGuide: 'Vamos melhorar isso no futuro. Por favor, envie seu feedback para <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b>.',
            currentProject: 'Nome do projeto atual:',
            feedback: 'Feedback',
            feedbackGuideShort: 'Valorizamos seu feedback!',
            credits: 'Créditos de som'
        },
        ru: {
            appName: 'ПомоЛог',
            feedbackGuide: 'В будущем мы это улучшим. Пожалуйста, отправьте свой отзыв на <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b>.',
            currentProject: 'Текущее название проекта:',
            feedback: 'Обратная связь',
            feedbackGuideShort: 'Мы ценим ваши отзывы!',
            credits: 'Звуковые кредиты'
        },
        ur: {
            appName: 'پومو لاگ',
            feedbackGuide: 'ہم مستقبل میں اس میں بہتری لائیں گے۔ براہ کرم اپنی رائے <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b> پر بھیجیں۔',
            currentProject: 'موجودہ پروجیکٹ کا نام:',
            feedback: 'رائے',
            feedbackGuideShort: 'ہم آپ کی رائے کو اہمیت دیتے ہیں!',
            credits: 'آواز کے کریڈٹ'
        }
    };
    function getLang() {
        const lang = (navigator.language || navigator.userLanguage || 'ko').slice(0,2).toLowerCase();
        return I18N[lang] ? lang : 'ko';
    }
    function i18nUpdate(selectedLang) {
        const lang = selectedLang || getLang();
        document.title = I18N[lang].appName + ' (PomoLog)';
        // 헤더
        const h1 = document.querySelector('.logo h1');
        if (h1) h1.innerHTML = I18N[lang].appName + ' (PomoLog)';
        const logo = document.querySelector('.logo img');
        if (logo) logo.alt = I18N[lang].appName + ' 로고';
        // 프로젝트 이름 라벨
        const projectLabel = document.querySelector('label[for="project-name"]');
        if (projectLabel) projectLabel.textContent = I18N[lang].currentProject;
        // 피드백 탭
        const feedbackTab = document.querySelector('#feedback h2');
        if (feedbackTab) feedbackTab.textContent = I18N[lang].feedback;
        const feedbackGuide = document.querySelector('#feedback .feedback-container > div');
        if (feedbackGuide) feedbackGuide.innerHTML = I18N[lang].feedbackGuide;
        const feedbackGuideShort = document.querySelector('#feedback .feedback-container > p');
        if (feedbackGuideShort) feedbackGuideShort.textContent = I18N[lang].feedbackGuideShort;
        // 사운드 크레딧
        const credits = document.querySelector('#feedback .credits-section h3');
        if (credits) credits.textContent = I18N[lang].credits;
        // 드롭다운 값 동기화
        const langSelect = document.getElementById('lang-select');
        if (langSelect) langSelect.value = lang;
    }
    document.addEventListener('DOMContentLoaded', function() {
        i18nUpdate();
        const langSelect = document.getElementById('lang-select');
        if (langSelect) {
            langSelect.value = getLang();
            langSelect.addEventListener('change', function() {
                i18nUpdate(langSelect.value);
            });
        }
    });
    </script>
</head>
<body>
    <header>
        <div class="logo">
            <img src="../icons/icon48.png" alt="포모로그 로고">
            <h1>포모로그 (PomoLog)</h1>
        </div>
        <nav>
            <button class="tab-button active" data-tab="settings">설정</button>
            <button class="tab-button" data-tab="stats">기록</button>
            <button class="tab-button" data-tab="feedback">피드백</button>
            <select id="lang-select" style="margin-left:1em;">
                <option value="ko">한국어</option>
                <option value="en">English</option>
                <option value="zh">中文</option>
                <option value="hi">हिन्दी</option>
                <option value="es">Español</option>
                <option value="fr">Français</option>
                <option value="ar">العربية</option>
                <option value="bn">বাংলা</option>
                <option value="pt">Português</option>
                <option value="ru">Русский</option>
                <option value="ur">اردو</option>
            </select>
        </nav>
    </header>

    <main>
        <!-- 설정 탭 -->
        <section id="settings" class="tab-content active">
            <div class="project-settings">
                <h2>프로젝트</h2>
                <div class="setting-group">
                    <label for="project-name">현재 프로젝트 이름:</label>
                    <input type="text" id="project-name" placeholder="프로젝트 이름을 입력하세요" list="project-history-list">
                    <datalist id="project-history-list">
                        <!-- 이전 프로젝트 이름들이 여기에 동적으로 추가됩니다 -->
                    </datalist>
                </div>
            </div>

            <div class="settings-container">
                <div class="timer-settings">
                    <h2>집중</h2>
                    <div class="setting-group">
                        <label for="focus-duration">지속 시간:</label>
                        <input type="number" id="focus-duration" min="1" max="60" value="25"> 분
                    </div>
                    <div class="setting-group">
                        <label>타이머 소리:</label>
                        <select id="focus-sound">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                        <button class="preview-sound">▶ 미리듣기</button>
                        <input type="number" id="focus-sound-volume" min="0" max="100" value="10">
                        <label for="focus-sound-volume">볼륨 (0~100):</label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="focus-desktop-notification">
                            데스크톱 알림 설정
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="focus-tab-notification">
                            새로운 탭 알림 설정
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>재생:</label>
                        <select id="focus-sound-type">
                            <option value="brown_noise">Brown Noise</option>
                            <option value="rainy_birds">Rainy Day</option>
                            <option value="clock_ticking">Clock Ticking</option>
                        </select>
                        <button class="preview-sound">▶ 미리듣기</button>
                        <input type="number" id="focus-sound-type-volume" min="0" max="100" value="10">
                        <label for="focus-sound-type-volume">볼륨 (0~100):</label>
                    </div>
                </div>

                <div class="timer-settings">
                    <h2>짧은 휴식</h2>
                    <div class="setting-group">
                        <label for="short-break-duration">지속 시간:</label>
                        <input type="number" id="short-break-duration" min="1" max="30" value="5"> 분
                    </div>
                    <div class="setting-group">
                        <label>타이머 소리:</label>
                        <select id="short-break-sound">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                        <button class="preview-sound">▶ 미리듣기</button>
                        <input type="number" id="short-break-sound-volume" min="0" max="100" value="10">
                        <label for="short-break-sound-volume">볼륨 (0~100):</label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="short-break-desktop-notification">
                            데스크톱 알림 설정
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="short-break-tab-notification">
                            새로운 탭 알림 설정
                        </label>
                    </div>
                </div>

                <div class="timer-settings">
                    <h2>긴 휴식</h2>
                    <div class="setting-group">
                        <label>긴 휴식 시작하기:</label>
                        <select id="long-break-start">
                            <option value="2">2번째 휴식마다</option>
                            <option value="3">3번째 휴식마다</option>
                            <option value="4">4번째 휴식마다</option>
                            <option value="5">5번째 휴식마다</option>
                            <option value="6">6번째 휴식마다</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="long-break-duration">지속 시간:</label>
                        <input type="number" id="long-break-duration" min="1" max="60" value="15"> 분
                    </div>
                    <div class="setting-group">
                        <label>타이머 소리:</label>
                        <select id="long-break-sound">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                        <button class="preview-sound">▶ 미리듣기</button>
                        <input type="number" id="long-break-sound-volume" min="0" max="100" value="10">
                        <label for="long-break-sound-volume">볼륨 (0~100):</label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="long-break-desktop-notification">
                            데스크톱 알림 설정
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="long-break-tab-notification">
                            새로운 탭 알림 설정
                        </label>
                    </div>
                </div>
            </div>
            <div class="settings-bottom-menu">
                <div class="bottom-menu-buttons">
                    <button id="export-settings" class="menu-button">
                        <span class="icon">⬇️</span>
                        설정 내보내기
                    </button>
                    <button id="import-settings" class="menu-button">
                        <span class="icon">⬆️</span>
                        설정 가져오기
                    </button>
                    <button id="reset-settings" class="menu-button warning">
                        <span class="icon">🔄</span>
                        설정 초기화
                    </button>
                </div>
                <input type="file" id="settings-file-input" accept=".json" style="display: none;">
            </div>
        </section>

        <!-- 통계 탭 -->
        <section id="stats" class="tab-content">
            <div class="stats-container">
                <div class="stats-summary">
                    <div class="stat-card">
                        <h3>오늘</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>이번 주</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>이번 달</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>올해</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>총</h3>
                        <div class="stat-value">0</div>
                        <div class="stat-label">0.00</div>
                    </div>
                </div>

                <div class="stats-charts">
                    <div class="chart-container">
                        <h3>일 단위 차트</h3>
                        <canvas id="daily-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>주 단위 차트</h3>
                        <canvas id="weekly-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>월 단위 차트</h3>
                        <canvas id="monthly-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>년 단위 차트</h3>
                        <canvas id="yearly-chart" height="200"></canvas>
                    </div>
                </div>

                <div class="stats-bottom-menu">
                    <div class="bottom-menu-buttons">
                        <button id="export-stats" class="menu-button">
                            <span class="icon">⬇️</span>
                            통계 내보내기
                        </button>
                        <button id="import-stats" class="menu-button">
                            <span class="icon">⬆️</span>
                            통계 가져오기
                        </button>
                        <button id="reset-stats" class="menu-button warning">
                            <span class="icon">🔄</span>
                            통계 초기화
                        </button>
                    </div>
                    <input type="file" id="stats-file-input" accept=".csv" style="display: none;">
                </div>
            </div>
        </section>

        <!-- 피드백 탭 -->
        <section id="feedback" class="tab-content">
            <div class="feedback-container">
                <h2>피드백</h2>
                <p>여러분의 소중한 의견을 들려주세요!</p>
                <div style="margin-bottom: 1em; color: #444; font-size: 1.1em;">
                    향후 개선하겠습니다. 피드백은 <b><a href="mailto:willyads@gmail.com">willyads@gmail.com</a></b> 으로 메일 보내주세요.
                </div>
                <!--
                <form id="feedback-form">
                    <textarea id="feedback-text" rows="5" placeholder="의견을 작성해주세요..."></textarea>
                    <button type="submit" class="submit-feedback">보내기</button>
                </form>
                -->
                <div class="credits-section">
                    <h3>사운드 크레딧</h3>
                    <ul>
                        <li>Gong 002.wav by tec_studio -- <a href="https://freesound.org/s/361494/" target="_blank">https://freesound.org/s/361494/</a> -- License: Creative Commons 0</li>
                        <li>Brown Noise 2 minutes by Jagadamba -- <a href="https://freesound.org/s/253922/" target="_blank">https://freesound.org/s/253922/</a> -- License: Attribution NonCommercial 4.0</li>
                        <li>Rainy Day with Various Birds by toonothing -- <a href="https://freesound.org/s/201534/" target="_blank">https://freesound.org/s/201534/</a> -- License: Creative Commons 0</li>
                        <li>ticking of the clock 01.wav by blukotek -- <a href="https://freesound.org/s/412751/" target="_blank">https://freesound.org/s/412751/</a> -- License: Creative Commons 0</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- Chrome API Mock for standalone usage -->
    <script src="../scripts/chrome-api-mock.js"></script>
    <!-- Then load our application scripts -->
    <script src="../scripts/dashboard.js"></script>
    <script src="../scripts/settings.js"></script>
    <script src="../scripts/stats-display.js"></script>
</body>
</html> 